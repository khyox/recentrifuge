# Installation

Please, check the Recentrifuge's wiki for the most updated installation instructions: [Recentrifuge Wiki Installation page](https://github.com/khyox/recentrifuge/wiki/Installation)

## Overview
1.  **Basic requirements**: Python 3.6 or higher is required. No modules beyond Python Standard Library ones are used by Recentrifuge with the exception of _biopython_ for LMAT support and, optionally: _pandas_ and _openpyxl_ for exporting results to Excel/CSV/TSV as extra files; _matplotlib_ and _xlrd_ for comprehensive testing of the whole Recentrifuge package.
  * If you need help with the installation and setup of Python 3.6 or higher, please consult [Python Setup and Usage ](https://docs.python.org/3/using/index.html).
  * In case you need help with _pandas_ installation, have a look at [pandas installation instructions](http://pandas.pydata.org/pandas-docs/stable/install.html).
  * Should you need help installing _biopython_, please check [biopython installation instructions](http://biopython.org/DIST/docs/install/Installation.html).
2. **Getting the code**: just clone the Recentrifuge repository on GitHub. Please see [cloning a repository in GitHub](https://help.github.com/articles/cloning-a-repository/) for help on this. You will need `git` installed on your system, in case it is not, please check [installing Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git).
3. **Getting the databases**: in the cloning dir, execute `retaxdump.py`. It will download and unzip the required local databases from NCBI servers under the subdirectory `taxdump`. For LMAT plasmids support please read [this](#support-for-lmat-plasmids-classification).
4. **Testing (optional step)**: Please see detailed instructions about testing and validating your Recentrifuge installation [here](https://github.com/khyox/recentrifuge/wiki/Testing).
5. At this point, **Recentrifuge is ready** to analyze your samples:
  * if you have results from Centrifuge, please see [running Recentrifuge for Centrifuge](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-Centrifuge),
  * in case you have LMAT outputs, your choice is [running Recentrifuge for LMAT](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-LMAT),
  * if you have CLARK(S) results, please enter [running Recentrifuge for CLARK](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-CLARK),
  * in case you have data from Kraken, please check [running Recentrifuge for Kraken](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-Kraken),
  * if you use any other taxonomic classifier, please see [running Recentrifuge for a generic classifier](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-a-generic-classifier).
  
6. **Interactive visualization** of Recentrifuge results: Just open the HTML file generated by Recentrifuge with any JavaScript-enabled browser. Firefox or Chrome are recommended.
7. **Numeric results** for downstream applications: Recentrifuge generates CSV/TSV extra files or an Excel file with various sheets containing diverse statistics and detailed numeric results.

## Notes
### Python version
Python version under 3.6 is no supported as Recentrifuge uses new syntax features of Python 3.6, like syntax for variable annotations ([PEP 526](https://www.python.org/dev/peps/pep-0526/)) and formatted string literals ([PEP 498](https://www.python.org/dev/peps/pep-0498/)). The syntax for type annotations was introduced in Python 3.5 ([PEP 484](https://www.python.org/dev/peps/pep-0484/)) but it is with Python 3.6 when it has achieved maturity for variable annotations. Powerful tools for [static type analysis](https://en.wikipedia.org/wiki/Static_program_analysis) in Python have evolved along with these standards. The development of Recentrifuge includes checks with [pylint](https://www.pylint.org/) and [mypy](http://www.mypy-lang.org). A code whose aim is to perform a robust comparative metagenomic analysis is a very good candidate for robust coding.

### Support for LMAT plasmids classification
One of the most interesting but still quite unknown features of the LMAT software is its ability to properly classify over 4000 plasmids. These plasmids are assigned a taxonomic id (`taxid`) beyond the NCBI system. Recentrifuge offers support for this extended classification but requires the LMAT provided file `plasmid.names.txt` located in the same directory as the NCBI nodes information files. This location is controlled by the flag `-n/--nodespath`.

If Recentrifuge finds the `plasmid.names.txt` file, it will parse the plasmids taxid and name using ad hoc regular expressions in order to present the user with a meaningful name for the very diverse plasmids. Recentrifuge is also doing a check to assure that every plasmid in the file is compatible with the NCBI taxonomy used so that only those passing are added. Further details [here](https://github.com/khyox/recentrifuge/wiki/Running-recentrifuge-for-LMAT#more-about-plasmids).
